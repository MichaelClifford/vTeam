INFO:     Will watch for changes in these directories: ['/Users/gkrumbac/Documents/rhoai-ai-feature-sizing']
INFO:     Uvicorn running on http://0.0.0.0:8000 (Press CTRL+C to quit)
INFO:     Started reloader process [11259] using WatchFiles
INFO:     Started server process [11347]
INFO:     Waiting for application startup.
INFO:root:Database initialized successfully
INFO:httpx:HTTP Request: GET http://llama-stack-route-llama-stack.apps.gkrumbac.dev.datahub.redhat.com/v1/vector-dbs "HTTP/1.1 200 OK"
INFO:RAGService:Vector databases already in sync
INFO:root:Vector databases are already in sync
INFO:root:Application startup completed
INFO:     Application startup complete.
INFO:httpx:HTTP Request: POST http://llama-stack-route-llama-stack.apps.gkrumbac.dev.datahub.redhat.com/v1/tool-runtime/rag-tool/query "HTTP/1.1 200 OK"
Creating client for http://llama-stack-route-llama-stack.apps.gkrumbac.dev.datahub.redhat.com
INFO:     127.0.0.1:65148 - "POST /rag/chunks/browse HTTP/1.1" 200 OK
INFO:     127.0.0.1:65182 - "GET /rag/vector-databases/github_repos/sources HTTP/1.1" 200 OK
INFO:httpx:HTTP Request: DELETE http://llama-stack-route-llama-stack.apps.gkrumbac.dev.datahub.redhat.com/v1/vector-dbs/github_repos "HTTP/1.1 200 OK"
INFO:httpx:HTTP Request: POST http://llama-stack-route-llama-stack.apps.gkrumbac.dev.datahub.redhat.com/v1/vector-dbs "HTTP/1.1 200 OK"
INFO:RAGService:Reactivated existing vector database: github_repos
INFO:RAGService:Successfully reset vector database: github_repos
INFO:     127.0.0.1:65212 - "POST /rag/vector-databases/github_repos/reset HTTP/1.1" 200 OK
INFO:     127.0.0.1:65269 - "GET /rag/vector-databases/github_repos/sources HTTP/1.1" 200 OK
WARNING:  WatchFiles detected changes in 'src/rhoai_ai_feature_sizing/api/rag_service.py'. Reloading...
INFO:     Shutting down
INFO:     Waiting for application shutdown.
INFO:root:Application shutdown completed
INFO:     Application shutdown complete.
INFO:     Finished server process [11347]
INFO:     Started server process [12871]
INFO:     Waiting for application startup.
INFO:root:Database initialized successfully
INFO:httpx:HTTP Request: GET http://llama-stack-route-llama-stack.apps.gkrumbac.dev.datahub.redhat.com/v1/vector-dbs "HTTP/1.1 200 OK"
INFO:RAGService:Vector databases already in sync
INFO:root:Vector databases are already in sync
INFO:root:Application startup completed
INFO:     Application startup complete.
INFO:httpx:HTTP Request: DELETE http://llama-stack-route-llama-stack.apps.gkrumbac.dev.datahub.redhat.com/v1/vector-dbs/github_repos "HTTP/1.1 200 OK"
INFO:httpx:HTTP Request: POST http://llama-stack-route-llama-stack.apps.gkrumbac.dev.datahub.redhat.com/v1/vector-dbs "HTTP/1.1 200 OK"
INFO:RAGService:Reactivated existing vector database: github_repos
INFO:RAGService:Successfully reset vector database: github_repos
Creating client for http://llama-stack-route-llama-stack.apps.gkrumbac.dev.datahub.redhat.com
INFO:     127.0.0.1:49801 - "POST /rag/vector-databases/github_repos/reset HTTP/1.1" 200 OK
INFO:     127.0.0.1:49803 - "GET /rag/vector-databases/github_repos/sources HTTP/1.1" 200 OK
INFO:     127.0.0.1:49801 - "GET /rag/vector-databases/github_repos HTTP/1.1" 200 OK
INFO:     127.0.0.1:49861 - "OPTIONS /rag/bulk-ingest HTTP/1.1" 200 OK
INFO:src.rhoai_ai_feature_sizing.api.task_manager:Created background task e18bf8a6-befb-4f5e-92bd-a96f3d05d28a of type ingestion
INFO:     127.0.0.1:49861 - "POST /rag/bulk-ingest HTTP/1.1" 200 OK
INFO:src.rhoai_ai_feature_sizing.api.task_manager:Starting background task e18bf8a6-befb-4f5e-92bd-a96f3d05d28a
INFO:     127.0.0.1:49861 - "GET /rag/tasks/e18bf8a6-befb-4f5e-92bd-a96f3d05d28a HTTP/1.1" 200 OK
ERROR:root:Bulk ingestion task failed: GitHub access token required for repository ingestion. Please set GITHUB_ACCESS_TOKEN environment variable. GitHub URLs found: ['https://github.com/Gkrumbach07/odh-dashboard/tree/main/docs']
ERROR:src.rhoai_ai_feature_sizing.api.task_manager:Background task e18bf8a6-befb-4f5e-92bd-a96f3d05d28a failed: GitHub access token required for repository ingestion. Please set GITHUB_ACCESS_TOKEN environment variable. GitHub URLs found: ['https://github.com/Gkrumbach07/odh-dashboard/tree/main/docs']
Traceback (most recent call last):
  File "/Users/gkrumbac/Documents/rhoai-ai-feature-sizing/src/rhoai_ai_feature_sizing/api/task_manager.py", line 152, in _run_task
    result = await loop.run_in_executor(self.executor, task_wrapper)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/gkrumbac/.pyenv/versions/3.12.9/lib/python3.12/concurrent/futures/thread.py", line 59, in run
    result = self.fn(*self.args, **self.kwargs)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/gkrumbac/Documents/rhoai-ai-feature-sizing/src/rhoai_ai_feature_sizing/api/task_manager.py", line 143, in task_wrapper
    return task_func(
           ^^^^^^^^^^
  File "/Users/gkrumbac/Documents/rhoai-ai-feature-sizing/src/rhoai_ai_feature_sizing/api/main.py", line 687, in _run_bulk_ingestion_task
    result = rag_service.ingest_documents_with_llamaindex_sync(
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/gkrumbac/Documents/rhoai-ai-feature-sizing/src/rhoai_ai_feature_sizing/api/rag_service.py", line 687, in ingest_documents_with_llamaindex_sync
    raise ValueError(
ValueError: GitHub access token required for repository ingestion. Please set GITHUB_ACCESS_TOKEN environment variable. GitHub URLs found: ['https://github.com/Gkrumbach07/odh-dashboard/tree/main/docs']
INFO:     127.0.0.1:49861 - "GET /rag/tasks/e18bf8a6-befb-4f5e-92bd-a96f3d05d28a HTTP/1.1" 200 OK
INFO:     127.0.0.1:49861 - "GET /rag/tasks/e18bf8a6-befb-4f5e-92bd-a96f3d05d28a HTTP/1.1" 200 OK
INFO:     127.0.0.1:49861 - "GET /rag/tasks/e18bf8a6-befb-4f5e-92bd-a96f3d05d28a HTTP/1.1" 200 OK
INFO:     127.0.0.1:49861 - "GET /rag/tasks/e18bf8a6-befb-4f5e-92bd-a96f3d05d28a HTTP/1.1" 200 OK
INFO:     127.0.0.1:49861 - "GET /rag/tasks/e18bf8a6-befb-4f5e-92bd-a96f3d05d28a HTTP/1.1" 200 OK
INFO:     127.0.0.1:49861 - "GET /rag/tasks/e18bf8a6-befb-4f5e-92bd-a96f3d05d28a HTTP/1.1" 200 OK
INFO:     127.0.0.1:49861 - "GET /rag/tasks/e18bf8a6-befb-4f5e-92bd-a96f3d05d28a HTTP/1.1" 200 OK
INFO:     127.0.0.1:49861 - "GET /rag/tasks/e18bf8a6-befb-4f5e-92bd-a96f3d05d28a HTTP/1.1" 200 OK
INFO:     127.0.0.1:49861 - "GET /rag/tasks/e18bf8a6-befb-4f5e-92bd-a96f3d05d28a HTTP/1.1" 200 OK
INFO:     127.0.0.1:49861 - "GET /rag/tasks/e18bf8a6-befb-4f5e-92bd-a96f3d05d28a HTTP/1.1" 200 OK
INFO:     127.0.0.1:49861 - "GET /rag/tasks/e18bf8a6-befb-4f5e-92bd-a96f3d05d28a HTTP/1.1" 200 OK
INFO:     127.0.0.1:49861 - "GET /rag/vector-databases/github_repos HTTP/1.1" 200 OK
INFO:     127.0.0.1:49979 - "GET /rag/vector-databases/github_repos/sources HTTP/1.1" 200 OK
INFO:     127.0.0.1:49980 - "GET /rag/vector-databases/github_repos/sources HTTP/1.1" 200 OK
INFO:     127.0.0.1:49978 - "GET /rag/vector-databases/github_repos HTTP/1.1" 200 OK
INFO:     127.0.0.1:49981 - "GET /sessions?page=1&page_size=10 HTTP/1.1" 200 OK
INFO:     127.0.0.1:49982 - "GET /sessions?page=1&page_size=10 HTTP/1.1" 200 OK
INFO:     127.0.0.1:50026 - "GET /rag/vector-databases/github_repos/sources HTTP/1.1" 200 OK
INFO:     127.0.0.1:50022 - "GET /rag/vector-databases/github_repos HTTP/1.1" 200 OK
INFO:     127.0.0.1:50027 - "GET /rag/vector-databases/github_repos/sources HTTP/1.1" 200 OK
INFO:     127.0.0.1:50023 - "GET /rag/vector-databases/github_repos HTTP/1.1" 200 OK
INFO:     127.0.0.1:50024 - "GET /sessions?page=1&page_size=10 HTTP/1.1" 200 OK
INFO:     127.0.0.1:50025 - "GET /sessions?page=1&page_size=10 HTTP/1.1" 200 OK
INFO:     127.0.0.1:50124 - "GET /sessions?page=1&page_size=10 HTTP/1.1" 200 OK
INFO:     127.0.0.1:50128 - "GET /rag/vector-databases/github_repos/sources HTTP/1.1" 200 OK
INFO:     127.0.0.1:50125 - "GET /sessions?page=1&page_size=10 HTTP/1.1" 200 OK
INFO:     127.0.0.1:50129 - "GET /rag/vector-databases/github_repos/sources HTTP/1.1" 200 OK
INFO:     127.0.0.1:50126 - "GET /rag/vector-databases/github_repos HTTP/1.1" 200 OK
INFO:     127.0.0.1:50127 - "GET /rag/vector-databases/github_repos HTTP/1.1" 200 OK
INFO:httpx:HTTP Request: DELETE http://llama-stack-route-llama-stack.apps.gkrumbac.dev.datahub.redhat.com/v1/vector-dbs/github_repos "HTTP/1.1 200 OK"
INFO:RAGService:Cleaned up 1 ingestion requests and their background tasks for vector database: github_repos
INFO:httpx:HTTP Request: POST http://llama-stack-route-llama-stack.apps.gkrumbac.dev.datahub.redhat.com/v1/vector-dbs "HTTP/1.1 200 OK"
INFO:RAGService:Reactivated existing vector database: github_repos
INFO:RAGService:Successfully reset vector database: github_repos
INFO:     127.0.0.1:50127 - "POST /rag/vector-databases/github_repos/reset HTTP/1.1" 200 OK
INFO:     127.0.0.1:50126 - "GET /rag/vector-databases/github_repos/sources HTTP/1.1" 200 OK
INFO:     127.0.0.1:50127 - "GET /rag/vector-databases/github_repos HTTP/1.1" 200 OK
